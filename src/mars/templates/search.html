<!doctype html>
{% load staticfiles %}
<html class="no-js" lang="" style="background-size:cover">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="{% static 'img/apple-touch-icon.png' %}">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
        <link rel="stylesheet" href="{% static 'css/main.css' %}">
        <link rel="stylesheet" href="{% static 'css/materialize.min.css' %}">
        <script src="{% static 'js/vendor/modernizr-2.8.3.min.js' %}"></script>
    </head>
    <body>
      <!-- Navbar -->
      <nav style="opacity:.6">
        <div class="nav-wrapper grey darken-3 white-text">
          <a href="#" class="brand-logo container">Mineral Search</a>
          <ul id="nav-mobile" class="right hide-on-small-and-down">
            <li><a href="sass.html">Sass</a></li>
            <li><a href="badges.html">Components</a></li>
            <li><a href="collapsible.html">JavaScript</a></li>
          </ul>
        </div>
      </nav>

        <!-- Add your site or application content here -->
        <div class="container section" id="content" >
          <!-- Search box -->
          <form method="POST">
          {% csrf_token %}
          {{search_formset.management_form}}
          <ul class="collapsible" data-collapsible="accordion" id="myList" >

            {% for search_form in search_formset %}
            <li>
              <div class="collapsible-header active center" style="background-color:White;">
                <span class="left">Search {{forloop.counter}}</span>
              </div>
              <div class="collapsible-body" style="background-color:White; opacity:0.90">
                <div class="mine" style="padding: 20px">
                  {{ search_form}}
                </div>
              </div>
            </li>
            {% endfor %}

            <li>
              <div class="collapsible-header">
                <div class="center-align" style="padding:20px">

                    <div class="btn waves-effect waves-light" id="addSearch" onclick="addInput('myList','addSearch');">
                        Add a Search +
                    </div>
                    <button type="submit" class="btn red waves-effect waves-light"/>
                      Search
                    </button>
                </div>
              </div>
            </li>
          </ul>
          </form>

          <div class = "row">
            <div class = "col s12">
              <div class = "card">
                <div class = "card-content">
                  <a href="https://google.com">Need Help?</a>
                </div>
              </div>
            </div>
          </div>

        </div>


        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script>window.jQuery || document.write('<script src="{% static 'js/vendor/jquery-1.12.0.min.js' %}"><\/script>')</script>
        <script src="{% static 'js/plugins.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/materialize.min.js' %}"></script>

        <script>
          $(document).ready(function() {
            $('select').material_select();
            $(".button-collapse").sideNav();
          });

          var counter = 2;
          var limit = 10;
          function addInput(divName, elementBelow) {
            if (counter <= limit) {
              var nodeToAdd = document.createElement('li');
              var childNode = document.getElementById(elementBelow);
              nodeToAdd.innerHTML= "<div class='collapsible-header'>Search " + counter
                + "<i class='material-icons right'>delete</i> </div>"
                + "<div class='collapsible-body' style='background-color:White; opacity:0.90'>"
                + "<div style='padding:20px'>" + `{{csrf_token}}{{form}}` + "</div></div>";
              document.getElementById(divName).insertBefore(nodeToAdd,childNode);

              counter++;
            }
          }

        </script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
