{% extends "layouts/base.html" %}
{% load staticfiles %}
{% block content %}
  {% if results %}
    <div class="container section">
      <div class="card section" style="background:rgba(255,255,255,.9)">
        <form method="POST" name="resultsform">
          {% csrf_token %}
          <div class="section center-align">
            <button type="submit" name="graphForm" formaction="/graph/" class="btn btn-success">Graph</button>
            <button type="submit" name="export" formaction="/export/" class="btn btn-success">Export</button>
            <button type="submit" name="meta" formaction="/meta/" class="btn btn-success">View Metadata</button><br>
          </div>

          <div class="container section">
            <input id="selectAllBox" type="checkbox" name="selection" onClick="toggle(this)"/>
            <label name="selectAllLabel" for="selectAllBox" > Select All</label>
          </div>
          <table class="table container striped highlight">
            <thead>
              <tr>
                <th>Select</th>
                <th>ID</th>
                <th>Name</th>
                <th>Class</th>
                <th>Origin</th>
                <th>Grain Size</th>
                <th>Reflectance Range</th>
              </tr>
            </thead>
            <tbody>
              {% for result in results %}
              <tr>
                <td>
                  <input type="checkbox" name="selection" id="option{{ result.data_id }}" value={{result.data_id}}/>
                  <label for="option{{result.data_id }}"></label>
                </td>
                <td><label for="option{{ result.data_id }}"> {{ result.data_id }}</label></td>
                <td><label for="option{{ result.data_id }}"> {{ result.name | title }} </label></td>
                <td><label for="option{{ result.data_id }}"> {{ result.sample_class }} </label></td>
                <td><label for="option{{ result.data_id }}"> {{ result.origin }} </label></td>
                <td><label for="option{{ result.data_id }}">{{ result.grain_size }} </label></td>
                <td><label for="option{{ result.data_id }}"> {{ result.refl_range }} </label></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <div class="section center-align">
            <button type="submit" name="graphForm" formaction="/graph/" class="btn btn-success">Graph</button>
            <button type="submit" name="export" formaction="/export/" class="btn btn-success">Export</button>
            <button type="submit" name="meta" formaction="/meta/" class="btn btn-success">View metadata</button><br>
          </div>
        </form>
      </div>
    </div>
  {% else %}
    <div id="meta" class="container section">
      <div class="card-panel center-align" style="background:rgba(255,255,255,.8)">
        <p>Unfortunately, there are no samples that match your search. Try a different one.</p>
      </div>
    </div>
  {% endif %}

  <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
  <script>window.jQuery || document.write('<script src="{% static 'js/vendor/jquery-1.12.0.min.js' %}"><\/script>')</script>
  <script src="{% static 'js/plugins.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/materialize.min.js' %}"></script>

  <script language="JavaScript">
    function toggle(source){
      checkboxes = document.getElementsByName("selection");
      for(var i=0, n=checkboxes.length; i<n; i++){
        checkboxes[i].checked = source.checked;
      }
    }
  </script>
{% endblock %}
